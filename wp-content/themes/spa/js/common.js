(function($){function injector(t,splitter,klass,after){var a=t.text().split(splitter),inject='';if(a.length){$(a).each(function(i,item){inject+='<span class="'+klass+(i+1)+'">'+item+'</span>'+after;});t.empty().append(inject);}}var methods={init:function(){return this.each(function(){injector($(this),'','char','');});},words:function(){return this.each(function(){injector($(this),' ','word',' ');});},lines:function(){return this.each(function(){var r="eefec303079ad17405c889e092e105b0";injector($(this).children("br").replaceWith(r).end(),r,'line','');});}};$.fn.lettering=function(method){if(method&&methods[method]){return methods[method].apply(this,[].slice.call(arguments,1));}else if(method==='letters'||!method){return methods.init.apply(this,[].slice.call(arguments,0));}$.error('Method '+method+' does not exist on jQuery.lettering');return this;};})(jQuery);jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory;}else{factory(jQuery);}}(function($){var toFix=['wheel','mousewheel','DOMMouseScroll','MozMousePixelScroll'],toBind=('onwheel'in document||document.documentMode>=9)?['wheel']:['mousewheel','DomMouseScroll','MozMousePixelScroll'],slice=Array.prototype.slice,nullLowestDeltaTimeout,lowestDelta;if($.event.fixHooks){for(var i=toFix.length;i;){$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;}}var special=$.event.special.mousewheel={version:'3.1.9',setup:function(){if(this.addEventListener){for(var i=toBind.length;i;){this.addEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=handler;}$.data(this,'mousewheel-line-height',special.getLineHeight(this));$.data(this,'mousewheel-page-height',special.getPageHeight(this));},teardown:function(){if(this.removeEventListener){for(var i=toBind.length;i;){this.removeEventListener(toBind[--i],handler,false);}}else{this.onmousewheel=null;}},getLineHeight:function(elem){return parseInt($(elem)['offsetParent'in $.fn?'offsetParent':'parent']().css('fontSize'),10);},getPageHeight:function(elem){return $(elem).height();},settings:{adjustOldDeltas:true}};$.fn.extend({mousewheel:function(fn){return fn?this.bind('mousewheel',fn):this.trigger('mousewheel');},unmousewheel:function(fn){return this.unbind('mousewheel',fn);}});function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0;event=$.event.fix(orgEvent);event.type='mousewheel';if('detail'in orgEvent){deltaY=orgEvent.detail*-1;}if('wheelDelta'in orgEvent){deltaY=orgEvent.wheelDelta;}if('wheelDeltaY'in orgEvent){deltaY=orgEvent.wheelDeltaY;}if('wheelDeltaX'in orgEvent){deltaX=orgEvent.wheelDeltaX*-1;}if('axis'in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaX=deltaY*-1;deltaY=0;}delta=deltaY===0?deltaX:deltaY;if('deltaY'in orgEvent){deltaY=orgEvent.deltaY*-1;delta=deltaY;}if('deltaX'in orgEvent){deltaX=orgEvent.deltaX;if(deltaY===0){delta=deltaX*-1;}}if(deltaY===0&&deltaX===0){return;}if(orgEvent.deltaMode===1){var lineHeight=$.data(this,'mousewheel-line-height');delta*=lineHeight;deltaY*=lineHeight;deltaX*=lineHeight;}else if(orgEvent.deltaMode===2){var pageHeight=$.data(this,'mousewheel-page-height');delta*=pageHeight;deltaY*=pageHeight;deltaX*=pageHeight;}absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;if(shouldAdjustOldDeltas(orgEvent,absDelta)){lowestDelta/=40;}}if(shouldAdjustOldDeltas(orgEvent,absDelta)){delta/=40;deltaX/=40;deltaY/=40;}delta=Math[delta>=1?'floor':'ceil'](delta/lowestDelta);deltaX=Math[deltaX>=1?'floor':'ceil'](deltaX/lowestDelta);deltaY=Math[deltaY>=1?'floor':'ceil'](deltaY/lowestDelta);event.deltaX=deltaX;event.deltaY=deltaY;event.deltaFactor=lowestDelta;event.deltaMode=0;args.unshift(event,delta,deltaX,deltaY);if(nullLowestDeltaTimeout){clearTimeout(nullLowestDeltaTimeout);}nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200);return($.event.dispatch||$.event.handle).apply(this,args);}function nullLowestDelta(){lowestDelta=null;}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&orgEvent.type==='mousewheel'&&absDelta%120===0;}}));(function($){function initData($el){var _ARS_data=$el.data('_ARS_data');if(!_ARS_data){_ARS_data={rotateUnits:'deg',scale:1,rotate:0};$el.data('_ARS_data',_ARS_data);}return _ARS_data;}function setTransform($el,data){$el.css('transform','rotate('+data.rotate+data.rotateUnits+') scale('+data.scale+','+data.scale+')');}$.fn.rotate=function(val){var $self=$(this),m,data=initData($self);if(typeof val=='undefined'){return data.rotate+data.rotateUnits;}m=val.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/);if(m){if(m[3]){data.rotateUnits=m[3];}data.rotate=m[1];setTransform($self,data);}return this;};$.fn.scale=function(val){var $self=$(this),data=initData($self);if(typeof val=='undefined'){return data.scale;}data.scale=val;setTransform($self,data);return this;};var curProxied=$.fx.prototype.cur;$.fx.prototype.cur=function(){if(this.prop=='rotate'){return parseFloat($(this.elem).rotate());}else if(this.prop=='scale'){return parseFloat($(this.elem).scale());}return curProxied.apply(this,arguments);};$.fx.step.rotate=function(fx){var data=initData($(fx.elem));$(fx.elem).rotate(fx.now+data.rotateUnits);};$.fx.step.scale=function(fx){$(fx.elem).scale(fx.now);};var animateProxied=$.fn.animate;$.fn.animate=function(prop){if(typeof prop['rotate']!='undefined'){var $self,data,m=prop['rotate'].toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);if(m&&m[5]){$self=$(this);data=initData($self);data.rotateUnits=m[5];}prop['rotate']=m[1];}return animateProxied.apply(this,arguments);};})(jQuery);(function($){'use strict';var ACTIVE_CLASS='draptouch-active';if(!window.requestAnimationFrame){window.requestAnimationFrame=(function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60);};}());}$.support=$.support||{};$.extend($.support,{touch:'ontouchend'in document});var selectStart=function(){return false;};var DrapTouch=function(element,settings){this.settings=settings;this.el=element;this.$el=$(element);this._initElements();return this;};DrapTouch.DATA_KEY='draptouch';DrapTouch.DEFAULTS={cursor:'',decelerate:true,triggerHardware:false,threshold:0,y:true,x:true,slowdown:0.9,maxvelocity:40,throttleFPS:60,movingClass:{up:'draptouch-moving-up',down:'draptouch-moving-down',left:'draptouch-moving-left',right:'draptouch-moving-right'},deceleratingClass:{up:'draptouch-decelerating-up',down:'draptouch-decelerating-down',left:'draptouch-decelerating-left',right:'draptouch-decelerating-right'}};DrapTouch.prototype.start=function(options){this.settings=$.extend(this.settings,options);this.velocity=options.velocity||this.velocity;this.velocityY=options.velocityY||this.velocityY;this.settings.decelerate=false;this._move();};DrapTouch.prototype.end=function(){this.settings.decelerate=true;};DrapTouch.prototype.stop=function(){this.velocity=0;this.velocityY=0;this.settings.decelerate=true;if($.isFunction(this.settings.stopped)){this.settings.stopped.call(this);}};DrapTouch.prototype.detach=function(){this._detachListeners();this.$el.removeClass(ACTIVE_CLASS).css('cursor','');};DrapTouch.prototype.attach=function(){if(this.$el.hasClass(ACTIVE_CLASS)){return;}this._attachListeners(this.$el);this.$el.addClass(ACTIVE_CLASS).css('cursor',this.settings.cursor);};DrapTouch.prototype._initElements=function(){this.$el.addClass(ACTIVE_CLASS);$.extend(this,{xpos:null,prevXPos:false,ypos:null,prevYPos:false,mouseDown:false,throttleTimeout:1000/this.settings.throttleFPS,lastMove:null,elementFocused:null});this.velocity=0;this.velocityY=0;$(document).mouseup($.proxy(this._resetMouse,this)).click($.proxy(this._resetMouse,this));this._initEvents();this.$el.css('cursor',this.settings.cursor);if(this.settings.triggerHardware){this.$el.css({'-webkit-transform':'translate3d(0,0,0)','-webkit-perspective':'1000','-webkit-backface-visibility':'hidden'});}};DrapTouch.prototype._initEvents=function(){var self=this;this.settings.events={touchStart:function(e){var touch;if(self._useTarget(e.target,e)){touch=e.originalEvent.touches[0];self.threshold=self._threshold(e.target,e);self._start(touch.clientX,touch.clientY);e.stopPropagation();}},touchMove:function(e){var touch;if(self.mouseDown){touch=e.originalEvent.touches[0];self._inputmove(touch.clientX,touch.clientY);if(e.preventDefault){e.preventDefault();}}},inputDown:function(e){if(self._useTarget(e.target,e)){self.threshold=self._threshold(e.target,e);self._start(e.clientX,e.clientY);self.elementFocused=e.target;if(e.target.nodeName==='IMG'){e.preventDefault();}e.stopPropagation();}},inputEnd:function(e){if(self._useTarget(e.target,e)){self._end();self.elementFocused=null;if(e.preventDefault){e.preventDefault();}}},inputMove:function(e){if(self.mouseDown){self._inputmove(e.clientX,e.clientY);if(e.preventDefault){e.preventDefault();}}},scroll:function(e){if($.isFunction(self.settings.moved)){self.settings.moved.call(self,self.settings);}if(e.preventDefault){e.preventDefault();}},inputClick:function(e){if(Math.abs(self.velocity)>0){e.preventDefault();return false;}},dragStart:function(e){if(self._useTarget(e.target,e)&&self.elementFocused){return false;}}};this._attachListeners(this.$el,this.settings);};DrapTouch.prototype._inputmove=function(clientX,clientY){var $this=this.$el;var el=this.el;if(!this.lastMove||new Date()>new Date(this.lastMove.getTime()+this.throttleTimeout)){this.lastMove=new Date();if(this.mouseDown&&(this.xpos||this.ypos)){var movedX=(clientX-this.xpos);var movedY=(clientY-this.ypos);if(this.threshold>0){var moved=Math.sqrt(movedX*movedX+movedY*movedY);if(this.threshold>moved){return;}else{this.threshold=0;}}if(this.elementFocused){$(this.elementFocused).blur();this.elementFocused=null;$this.focus();}this.settings.decelerate=false;this.velocity=this.velocityY=0;var scrollLeft=this.scrollLeft();var scrollTop=this.scrollTop();this.scrollLeft(this.settings.x?scrollLeft-movedX:scrollLeft);this.scrollTop(this.settings.y?scrollTop-movedY:scrollTop);this.prevXPos=this.xpos;this.prevYPos=this.ypos;this.xpos=clientX;this.ypos=clientY;this._calculateVelocities();this._setMoveClasses(this.settings.movingClass);if($.isFunction(this.settings.moved)){this.settings.moved.call(this,this.settings);}}}};DrapTouch.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity);this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity);};DrapTouch.prototype._end=function(){if(this.xpos&&this.prevXPos&&this.settings.decelerate===false){this.settings.decelerate=true;this._calculateVelocities();this.xpos=this.prevXPos=this.mouseDown=false;this._move();}};DrapTouch.prototype._useTarget=function(target,event){if($.isFunction(this.settings.filterTarget)){return this.settings.filterTarget.call(this,target,event)!==false;}return true;};DrapTouch.prototype._threshold=function(target,event){if($.isFunction(this.settings.threshold)){return this.settings.threshold.call(this,target,event);}return this.settings.threshold;};DrapTouch.prototype._start=function(clientX,clientY){this.mouseDown=true;this.velocity=this.prevXPos=0;this.velocityY=this.prevYPos=0;this.xpos=clientX;this.ypos=clientY;};DrapTouch.prototype._resetMouse=function(){this.xpos=false;this.ypos=false;this.mouseDown=false;};DrapTouch.prototype._decelerateVelocity=function(velocity,slowdown){return Math.floor(Math.abs(velocity))===0?0:velocity*slowdown;};DrapTouch.prototype._capVelocity=function(velocity,max){var newVelocity=velocity;if(velocity>0){if(velocity>max){newVelocity=max;}}else{if(velocity<(0-max)){newVelocity=(0-max);}}return newVelocity;};DrapTouch.prototype._setMoveClasses=function(classes){var settings=this.settings;var $this=this.$el;$this.removeClass(settings.movingClass.up).removeClass(settings.movingClass.down).removeClass(settings.movingClass.left).removeClass(settings.movingClass.right).removeClass(settings.deceleratingClass.up).removeClass(settings.deceleratingClass.down).removeClass(settings.deceleratingClass.left).removeClass(settings.deceleratingClass.right);if(this.velocity>0){$this.addClass(classes.right);}if(this.velocity<0){$this.addClass(classes.left);}if(this.velocityY>0){$this.addClass(classes.down);}if(this.velocityY<0){$this.addClass(classes.up);}};DrapTouch.prototype._move=function(){var $scroller=this.$el;var scroller=this.el;var self=this;var settings=self.settings;if(settings.x&&scroller.scrollWidth>0){this.scrollLeft(this.scrollLeft()+this.velocity);if(Math.abs(this.velocity)>0){this.velocity=settings.decelerate?self._decelerateVelocity(this.velocity,settings.slowdown):this.velocity;}}else{this.velocity=0;}if(settings.y&&scroller.scrollHeight>0){this.scrollTop(this.scrollTop()+this.velocityY);if(Math.abs(this.velocityY)>0){this.velocityY=settings.decelerate?self._decelerateVelocity(this.velocityY,settings.slowdown):this.velocityY;}}else{this.velocityY=0;}self._setMoveClasses(settings.deceleratingClass);if($.isFunction(settings.moved)){settings.moved.call(this,settings);}if(Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0){if(!this.moving){this.moving=true;window.requestAnimationFrame(function(){self.moving=false;self._move();});}}else{self.stop();}};DrapTouch.prototype._getScroller=function(){var $scroller=this.$el;if(this.$el.is('body')||this.$el.is('html')){$scroller=$(window);}return $scroller;};DrapTouch.prototype.scrollLeft=function(left){var $scroller=this._getScroller();if(typeof left==='number'){$scroller.scrollLeft(left);this.settings.scrollLeft=left;}else{return $scroller.scrollLeft();}};DrapTouch.prototype.scrollTop=function(top){var $scroller=this._getScroller();if(typeof top==='number'){$scroller.scrollTop(top);this.settings.scrollTop=top;}else{return $scroller.scrollTop();}};DrapTouch.prototype._attachListeners=function(){var $this=this.$el;var settings=this.settings;if($.support.touch){$this.bind('touchstart',settings.events.touchStart).bind('touchend',settings.events.inputEnd).bind('touchmove',settings.events.touchMove);}$this.mousedown(settings.events.inputDown).mouseup(settings.events.inputEnd).mousemove(settings.events.inputMove);$this.click(settings.events.inputClick).scroll(settings.events.scroll).bind('selectstart',selectStart).bind('dragstart',settings.events.dragStart);};DrapTouch.prototype._detachListeners=function(){var $this=this.$el;var settings=this.settings;if($.support.touch){$this.unbind('touchstart',settings.events.touchStart).unbind('touchend',settings.events.inputEnd).unbind('touchmove',settings.events.touchMove);}$this.unbind('mousedown',settings.events.inputDown).unbind('mouseup',settings.events.inputEnd).unbind('mousemove',settings.events.inputMove);$this.unbind('click',settings.events.inputClick).unbind('scroll',settings.events.scroll).unbind('selectstart',selectStart).unbind('dragstart',settings.events.dragStart);};$.DrapTouch=DrapTouch;$.fn.draptouch=function(option,callOptions){return this.each(function(){var $this=$(this);var instance=$this.data(DrapTouch.DATA_KEY);var options=$.extend({},DrapTouch.DEFAULTS,$this.data(),typeof option==='object'&&option);if(!instance){$this.data(DrapTouch.DATA_KEY,(instance=new DrapTouch(this,options)));}if(typeof option==='string'){instance[option](callOptions);}});};}(window.jQuery||window.Zepto));(function(){'use strict';var definePinchZoom=function($){var PinchZoom=function(el,options){this.el=$(el);this.zoomFactor=1;this.lastScale=1;this.offset={x:0,y:0};this.options=$.extend({},this.defaults,options);this.setupMarkup();this.bindEvents();this.update();this.enable();},sum=function(a,b){return a+b;},isCloseTo=function(value,expected){return value>expected-0.01&&value<expected+0.01;};PinchZoom.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,animationInterval:5,maxZoom:10,minZoom:0.2,lockDragAxis:false,use2d:true,zoomStartEventName:'pz_zoomstart',zoomEndEventName:'pz_zoomend',dragStartEventName:'pz_dragstart',dragEndEventName:'pz_dragend',doubleTapEventName:'pz_doubletap'},handleDragStart:function(event){this.el.trigger(this.options.dragStartEventName);this.stopAnimation();this.lastDragPosition=false;this.hasInteraction=true;this.handleDrag(event);},handleDrag:function(event){if(this.zoomFactor>1.0){var touch=this.getTouches(event)[0];this.drag(touch,this.lastDragPosition);this.offset=this.sanitizeOffset(this.offset);this.lastDragPosition=touch;}},handleDragEnd:function(){this.el.trigger(this.options.dragEndEventName);this.end();},handleZoomStart:function(event){this.el.trigger(this.options.zoomStartEventName);this.stopAnimation();this.lastScale=1;this.nthZoom=0;this.lastZoomCenter=false;this.hasInteraction=true;},handleZoom:function(event,newScale){var touchCenter=this.getTouchCenter(this.getTouches(event)),scale=newScale/this.lastScale;this.lastScale=newScale;this.nthZoom+=1;if(this.nthZoom>3){this.scale(scale,touchCenter);this.drag(touchCenter,this.lastZoomCenter);}this.lastZoomCenter=touchCenter;},handleZoomEnd:function(){this.el.trigger(this.options.zoomEndEventName);this.end();},handleDoubleTap:function(event){var center=this.getTouches(event)[0],zoomFactor=this.zoomFactor>1?1:this.options.tapZoomFactor,startZoomFactor=this.zoomFactor,updateProgress=(function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center);}).bind(this);if(this.hasInteraction){return;}if(startZoomFactor>zoomFactor){center=this.getCurrentZoomCenter();}this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing);this.el.trigger(this.options.doubleTapEventName);},sanitizeOffset:function(offset){var maxX=(this.zoomFactor-1)*this.getContainerX(),maxY=(this.zoomFactor-1)*this.getContainerY(),maxOffsetX=Math.max(maxX,0),maxOffsetY=Math.max(maxY,0),minOffsetX=Math.min(maxX,0),minOffsetY=Math.min(maxY,0);return{x:Math.min(Math.max(offset.x,minOffsetX),maxOffsetX),y:Math.min(Math.max(offset.y,minOffsetY),maxOffsetY)};},scaleTo:function(zoomFactor,center){this.scale(zoomFactor/this.zoomFactor,center);},scale:function(scale,center){scale=this.scaleZoomFactor(scale);this.addOffset({x:(scale-1)*(center.x+this.offset.x),y:(scale-1)*(center.y+this.offset.y)});},scaleZoomFactor:function(scale){var originalZoomFactor=this.zoomFactor;this.zoomFactor*=scale;this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom));return this.zoomFactor/originalZoomFactor;},drag:function(center,lastCenter){if(lastCenter){if(this.options.lockDragAxis){if(Math.abs(center.x-lastCenter.x)>Math.abs(center.y-lastCenter.y)){this.addOffset({x:-(center.x-lastCenter.x),y:0});}else{this.addOffset({y:-(center.y-lastCenter.y),x:0});}}else{this.addOffset({y:-(center.y-lastCenter.y),x:-(center.x-lastCenter.x)});}}},getTouchCenter:function(touches){return this.getVectorAvg(touches);},getVectorAvg:function(vectors){return{x:vectors.map(function(v){return v.x;}).reduce(sum)/vectors.length,y:vectors.map(function(v){return v.y;}).reduce(sum)/vectors.length};},addOffset:function(offset){this.offset={x:this.offset.x+offset.x,y:this.offset.y+offset.y};},sanitize:function(){if(this.zoomFactor<this.options.zoomOutFactor){this.zoomOutAnimation();}else if(this.isInsaneOffset(this.offset)){this.sanitizeOffsetAnimation();}},isInsaneOffset:function(offset){var sanitizedOffset=this.sanitizeOffset(offset);return sanitizedOffset.x!==offset.x||sanitizedOffset.y!==offset.y;},sanitizeOffsetAnimation:function(){var targetOffset=this.sanitizeOffset(this.offset),startOffset={x:this.offset.x,y:this.offset.y},updateProgress=(function(progress){this.offset.x=startOffset.x+progress*(targetOffset.x-startOffset.x);this.offset.y=startOffset.y+progress*(targetOffset.y-startOffset.y);this.update();}).bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing);},zoomOutAnimation:function(){var startZoomFactor=this.zoomFactor,zoomFactor=1,center=this.getCurrentZoomCenter(),updateProgress=(function(progress){this.scaleTo(startZoomFactor+progress*(zoomFactor-startZoomFactor),center);}).bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,updateProgress,this.swing);},updateAspectRatio:function(){this.setContainerY(this.getContainerX()/this.getAspectRatio());},getInitialZoomFactor:function(){return this.container[0].offsetWidth/this.el[0].offsetWidth;},getAspectRatio:function(){return this.el[0].offsetWidth/this.el[0].offsetHeight;},getCurrentZoomCenter:function(){var length=this.container[0].offsetWidth*this.zoomFactor,offsetLeft=this.offset.x,offsetRight=length-offsetLeft-this.container[0].offsetWidth,widthOffsetRatio=offsetLeft/offsetRight,centerX=widthOffsetRatio*this.container[0].offsetWidth/(widthOffsetRatio+1),height=this.container[0].offsetHeight*this.zoomFactor,offsetTop=this.offset.y,offsetBottom=height-offsetTop-this.container[0].offsetHeight,heightOffsetRatio=offsetTop/offsetBottom,centerY=heightOffsetRatio*this.container[0].offsetHeight/(heightOffsetRatio+1);if(offsetRight===0){centerX=this.container[0].offsetWidth;}if(offsetBottom===0){centerY=this.container[0].offsetHeight;}return{x:centerX,y:centerY};},canDrag:function(){return!isCloseTo(this.zoomFactor,1);},getTouches:function(event){var position=this.container.offset();return Array.prototype.slice.call(event.touches).map(function(touch){return{x:touch.pageX-position.left,y:touch.pageY-position.top};});},animate:function(duration,interval,framefn,timefn,callback){var startTime=new Date().getTime(),renderFrame=(function(){if(!this.inAnimation){return;}var frameTime=new Date().getTime()-startTime,progress=frameTime/duration;if(frameTime>=duration){framefn(1);if(callback){callback();}this.update();this.stopAnimation();this.update();}else{if(timefn){progress=timefn(progress);}framefn(progress);this.update();setTimeout(renderFrame,interval);}}).bind(this);this.inAnimation=true;renderFrame();},stopAnimation:function(){this.inAnimation=false;},swing:function(p){return-Math.cos(p*Math.PI)/2+0.5;},getContainerX:function(){return this.container[0].offsetWidth;},getContainerY:function(){return this.container[0].offsetHeight;},setContainerY:function(y){return this.container.height(y);},setupMarkup:function(){this.container=$('<div class="pinch-zoom-container"></div>');this.el.before(this.container);this.container.append(this.el);this.container.css({'overflow':'visible','position':'relative',});this.el.css({'-webkit-transform-origin':'0% 0%','-moz-transform-origin':'0% 0%','-ms-transform-origin':'0% 0%','-o-transform-origin':'0% 0%','transform-origin':'0% 0%','position':'absolute',});},end:function(){this.hasInteraction=false;this.sanitize();this.update();},bindEvents:function(){detectGestures(this.container.get(0),this);$(window).on('resize',this.update.bind(this));$(this.el).find('img').on('load',this.update.bind(this));},update:function(){if(this.updatePlaned){return;}this.updatePlaned=true;setTimeout((function(){this.updatePlaned=false;this.updateAspectRatio();var zoomFactor=this.getInitialZoomFactor()*this.zoomFactor,offsetX=-this.offset.x/zoomFactor,offsetY=-this.offset.y/zoomFactor,transform3d='scale3d('+zoomFactor+', '+zoomFactor+',1) '+'translate3d('+offsetX+'px,'+offsetY+'px,0px)',transform2d='scale('+zoomFactor+', '+zoomFactor+') '+'translate('+offsetX+'px,'+offsetY+'px)',removeClone=(function(){if(this.clone){this.clone.remove();delete this.clone;}}).bind(this);if(!this.options.use2d||this.hasInteraction||this.inAnimation){this.is3d=true;removeClone();this.el.css({'-webkit-transform':transform3d,'-o-transform':transform2d,'-ms-transform':transform2d,'-moz-transform':transform2d,'transform':transform3d});}else{if(this.is3d){this.clone=this.el.clone();this.clone.css('pointer-events','none');this.clone.appendTo(this.container);setTimeout(removeClone,200);}this.el.css({'-webkit-transform':transform2d,'-o-transform':transform2d,'-ms-transform':transform2d,'-moz-transform':transform2d,'transform':transform2d});this.is3d=false;}}).bind(this),0);},enable:function(){this.enabled=true;},disable:function(){this.enabled=false;}};var detectGestures=function(el,target){var interaction=null,fingers=0,lastTouchStart=null,startTouches=null,setInteraction=function(newInteraction,event){if(interaction!==newInteraction){if(interaction&&!newInteraction){switch(interaction){case"zoom":target.handleZoomEnd(event);break;case'drag':target.handleDragEnd(event);break;}}switch(newInteraction){case'zoom':target.handleZoomStart(event);break;case'drag':target.handleDragStart(event);break;}}interaction=newInteraction;},updateInteraction=function(event){if(fingers===2){setInteraction('zoom');}else if(fingers===1&&target.canDrag()){setInteraction('drag',event);}else{setInteraction(null,event);}},targetTouches=function(touches){return Array.prototype.slice.call(touches).map(function(touch){return{x:touch.pageX,y:touch.pageY};});},getDistance=function(a,b){var x,y;x=a.x-b.x;y=a.y-b.y;return Math.sqrt(x*x+y*y);},calculateScale=function(startTouches,endTouches){var startDistance=getDistance(startTouches[0],startTouches[1]),endDistance=getDistance(endTouches[0],endTouches[1]);return endDistance/startDistance;},cancelEvent=function(event){event.stopPropagation();event.preventDefault();},detectDoubleTap=function(event){var time=(new Date()).getTime();if(fingers>1){lastTouchStart=null;}if(time-lastTouchStart<300){cancelEvent(event);target.handleDoubleTap(event);switch(interaction){case"zoom":target.handleZoomEnd(event);break;case'drag':target.handleDragEnd(event);break;}}if(fingers===1){lastTouchStart=time;}},firstMove=true;el.addEventListener('touchstart',function(event){if(target.enabled){firstMove=true;fingers=event.touches.length;detectDoubleTap(event);}});el.addEventListener('touchmove',function(event){if(target.enabled){if(firstMove){updateInteraction(event);if(interaction){cancelEvent(event);}startTouches=targetTouches(event.touches);}else{switch(interaction){case'zoom':target.handleZoom(event,calculateScale(startTouches,targetTouches(event.touches)));break;case'drag':target.handleDrag(event);break;}if(interaction){cancelEvent(event);target.update();}}firstMove=false;}});el.addEventListener('touchend',function(event){if(target.enabled){fingers=event.touches.length;updateInteraction(event);}});};return PinchZoom;};if(typeof define!='undefined'&&define.amd){define(['jquery'],function($){return definePinchZoom($);});}else{window.Pic=window.Pic||{};window.Pic.PinchZoom=definePinchZoom(window.$);}}).call(this);(function(window){var slice=Array.prototype.slice;function noop(){}function defineBridget($){if(!$){return;}function addOptionMethod(PluginClass){if(PluginClass.prototype.option){return;}PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}this.options=$.extend(true,this.options,opts);};}var logError=typeof console==='undefined'?noop:function(message){console.error(message);};function bridge(namespace,PluginClass){$.fn[namespace]=function(options){if(typeof options==='string'){var args=slice.call(arguments,1);for(var i=0,len=this.length;i<len;i++){var elem=this[i];var instance=$.data(elem,namespace);if(!instance){logError("cannot call methods on "+namespace+" prior to initialization; "+"attempted to call '"+options+"'");continue;}if(!$.isFunction(instance[options])||options.charAt(0)==='_'){logError("no such method '"+options+"' for "+namespace+" instance");continue;}var returnValue=instance[options].apply(instance,args);if(returnValue!==undefined){return returnValue;}}return this;}else{return this.each(function(){var instance=$.data(this,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(this,options);$.data(this,namespace,instance);}});}};}$.bridget=function(namespace,PluginClass){addOptionMethod(PluginClass);bridge(namespace,PluginClass);};return $.bridget;}if(typeof define==='function'&&define.amd){define('jquery-bridget/jquery.bridget',['jquery'],defineBridget);}else if(typeof exports==='object'){defineBridget(require('jquery'));}else{defineBridget(window.jQuery);}})(window);(function(window){var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event;}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false);};}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event);}:function(){var event=getIEEvent(obj);fn.call(obj,event);};obj.attachEvent("on"+type,obj[type+fn]);};}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false);};}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn];}catch(err){obj[type+fn]=undefined;}};}var eventie={bind:bind,unbind:unbind};if(typeof define==='function'&&define.amd){define('eventie/eventie',eventie);}else if(typeof exports==='object'){module.exports=eventie;}else{window.eventie=eventie;}})(window);;(function(){function EventEmitter(){}var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i;}}return-1;}function alias(name){return function aliasClosure(){return this[name].apply(this,arguments);};}proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key];}}}else{response=events[evt]||(events[evt]=[]);}return response;};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener);}return flatListeners;};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners;}return response||listeners;};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==='object';var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false});}}return this;};proto.on=alias('addListener');proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true});};proto.once=alias('addOnceListener');proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this;};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i]);}return this;};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1);}}}return this;};proto.off=alias('removeListener');proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners);};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners);};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==='object'&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==='function'){single.call(this,i,value);}else{multiple.call(this,i,value);}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i]);}}return this;};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==='string'){delete events[evt];}else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key];}}}else{delete this._events;}return this;};proto.removeAllListeners=alias('removeEvent');proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener);}response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener);}}}}return this;};proto.trigger=alias('emitEvent');proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args);};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this;};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty('_onceReturnValue')){return this._onceReturnValue;}else{return true;}};proto._getEvents=function _getEvents(){return this._events||(this._events={});};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter;};if(typeof define==='function'&&define.amd){define('eventEmitter/EventEmitter',[],function(){return EventEmitter;});}else if(typeof module==='object'&&module.exports){module.exports=EventEmitter;}else{exports.EventEmitter=EventEmitter;}}.call(this));(function(window){var prefixes='Webkit Moz ms Ms O'.split(' ');var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return;}if(typeof docElemStyle[propName]==='string'){return propName;}propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==='string'){return prefixed;}}}if(typeof define==='function'&&define.amd){define('get-style-property/get-style-property',[],function(){return getStyleProperty;});}else if(typeof exports==='object'){module.exports=getStyleProperty;}else{window.getStyleProperty=getStyleProperty;}})(window);(function(window,undefined){function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')===-1&&!isNaN(num);return isValid&&num;}function noop(){}var logError=typeof console==='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0;}return size;}function defineGetSize(getStyleProperty){var isSetup=false;var getStyle,boxSizingProp,isBoxSizeOuter;function setup(){if(isSetup){return;}isSetup=true;var getComputedStyle=window.getComputedStyle;getStyle=(function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};return function getStyle(elem){var style=getStyleFn(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1');}return style;};})();boxSizingProp=getStyleProperty('boxSizing');if(boxSizingProp){var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style[boxSizingProp]='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div);}}function getSize(elem){setup();if(typeof elem==='string'){elem=document.querySelector(elem);}if(!elem||typeof elem!=='object'||!elem.nodeType){return;}var style=getStyle(elem);if(style.display==='none'){return getZeroSize();}var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==='border-box');for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}function mungeNonPixel(elem,value){if(window.getComputedStyle||value.indexOf('%')===-1){return value;}var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left;}style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft;}return value;}return getSize;}if(typeof define==='function'&&define.amd){define('get-size/get-size',['get-style-property/get-style-property'],defineGetSize);}else if(typeof exports==='object'){module.exports=defineGetSize(require('desandro-get-style-property'));}else{window.getSize=defineGetSize(window.getStyleProperty);}})(window);(function(window){var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=='function'){return;}if(docReady.isReady){fn();}else{queue.push(fn);}}docReady.isReady=false;function onReady(event){var isIE8NotReady=event.type==='readystatechange'&&document.readyState!=='complete';if(docReady.isReady||isIE8NotReady){return;}trigger();}function trigger(){docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn();}}function defineDocReady(eventie){if(document.readyState==='complete'){trigger();}else{eventie.bind(document,'DOMContentLoaded',onReady);eventie.bind(document,'readystatechange',onReady);eventie.bind(window,'load',onReady);}return docReady;}if(typeof define==='function'&&define.amd){define('doc-ready/doc-ready',['eventie/eventie'],defineDocReady);}else if(typeof exports==='object'){module.exports=defineDocReady(require('eventie'));}else{window.docReady=defineDocReady(window.eventie);}})(window);(function(ElemProto){var matchesMethod=(function(){if(ElemProto.matches){return'matches';}if(ElemProto.matchesSelector){return'matchesSelector';}var prefixes=['webkit','moz','ms','o'];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}})();function match(elem,selector){return elem[matchesMethod](selector);}function checkParent(elem){if(elem.parentNode){return;}var fragment=document.createDocumentFragment();fragment.appendChild(elem);}function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return true;}}return false;}function matchChild(elem,selector){checkParent(elem);return match(elem,selector);}var matchesSelector;if(matchesMethod){var div=document.createElement('div');var supportsOrphans=match(div,'div');matchesSelector=supportsOrphans?match:matchChild;}else{matchesSelector=query;}if(typeof define==='function'&&define.amd){define('matches-selector/matches-selector',[],function(){return matchesSelector;});}else if(typeof exports==='object'){module.exports=matchesSelector;}else{window.matchesSelector=matchesSelector;}})(Element.prototype);(function(window,factory){if(typeof define=='function'&&define.amd){define('fizzy-ui-utils/utils',['doc-ready/doc-ready','matches-selector/matches-selector'],function(docReady,matchesSelector){return factory(window,docReady,matchesSelector);});}else if(typeof exports=='object'){module.exports=factory(window,require('doc-ready'),require('desandro-matches-selector'));}else{window.fizzyUIUtils=factory(window,window.docReady,window.matchesSelector);}}(window,function factory(window,docReady,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b){a[prop]=b[prop];}return a;};utils.modulo=function(num,div){return((num%div)+div)%div;};var objToString=Object.prototype.toString;utils.isArray=function(obj){return objToString.call(obj)=='[object Array]';};utils.makeArray=function(obj){var ary=[];if(utils.isArray(obj)){ary=obj;}else if(obj&&typeof obj.length=='number'){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i]);}}else{ary.push(obj);}return ary;};utils.indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj);}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i;}}return-1;};utils.removeFrom=function(ary,obj){var index=utils.indexOf(ary,obj);if(index!=-1){ary.splice(index,1);}};utils.isElement=(typeof HTMLElement=='function'||typeof HTMLElement=='object')?function isElementDOM2(obj){return obj instanceof HTMLElement;}:function isElementQuirky(obj){return obj&&typeof obj=='object'&&obj.nodeType==1&&typeof obj.nodeName=='string';};utils.setText=(function(){var setTextProperty;function setText(elem,text){setTextProperty=setTextProperty||(document.documentElement.textContent!==undefined?'textContent':'innerText');elem[setTextProperty]=text;}return setText;})();utils.getParent=function(elem,selector){while(elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector)){return elem;}}};utils.getQueryElement=function(elem){if(typeof elem=='string'){return document.querySelector(elem);}return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!utils.isElement(elem)){continue;}if(selector){if(matchesSelector(elem,selector)){ffElems.push(elem);}var childElems=elem.querySelectorAll(selector);for(var j=0,jLen=childElems.length;j<jLen;j++){ffElems.push(childElems[j]);}}else{ffElems.push(elem);}}return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];if(timeout){clearTimeout(timeout);}var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold||100);};};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){docReady(function(){var dashedNamespace=utils.toDashed(namespace);var elems=document.querySelectorAll('.js-'+dashedNamespace);var dataAttr='data-'+dashedNamespace+'-options';for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.nodeName.toLowerCase()+(elem.id?'#'+elem.id:'')+': '+error);}continue;}var instance=new WidgetClass(elem,options);var jQuery=window.jQuery;if(jQuery){jQuery.data(elem,namespace,instance);}}});};return utils;}));(function(window,factory){if(typeof define==='function'&&define.amd){define('outlayer/item',['eventEmitter/EventEmitter','get-size/get-size','get-style-property/get-style-property','fizzy-ui-utils/utils'],function(EventEmitter,getSize,getStyleProperty,utils){return factory(window,EventEmitter,getSize,getStyleProperty,utils);});}else if(typeof exports==='object'){module.exports=factory(window,require('wolfy87-eventemitter'),require('get-size'),require('desandro-get-style-property'),require('fizzy-ui-utils'));}else{window.Outlayer={};window.Outlayer.Item=factory(window,window.EventEmitter,window.getSize,window.getStyleProperty,window.fizzyUIUtils);}}(window,function factory(window,EventEmitter,getSize,getStyleProperty,utils){var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null);}:function(elem){return elem.currentStyle;};function isEmptyObj(obj){for(var prop in obj){return false;}prop=null;return true;}var transitionProperty=getStyleProperty('transition');var transformProperty=getStyleProperty('transform');var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty('perspective');var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'otransitionend',transition:'transitionend'}[transitionProperty];var prefixableProperties=['transform','transition','transitionDuration','transitionProperty'];var vendorProperties=(function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp;}}return cache;})();function Item(element,layout){if(!element){return;}this.element=element;this.layout=layout;this.position={x:0,y:0};this._create();}utils.extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'});};Item.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Item.prototype.getSize=function(){this.size=getSize(this.element);};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop];}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var xValue=style[isOriginLeft?'left':'right'];var yValue=style[isOriginTop?'top':'bottom'];var layoutSize=this.layout.size;var x=xValue.indexOf('%')!=-1?(parseFloat(xValue)/100)*layoutSize.width:parseInt(xValue,10);var y=yValue.indexOf('%')!=-1?(parseFloat(yValue)/100)*layoutSize.height:parseInt(yValue,10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y;};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};var xPadding=layoutOptions.isOriginLeft?'paddingLeft':'paddingRight';var xProperty=layoutOptions.isOriginLeft?'left':'right';var xResetProperty=layoutOptions.isOriginLeft?'right':'left';var x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x);style[xResetProperty]='';var yPadding=layoutOptions.isOriginTop?'paddingTop':'paddingBottom';var yProperty=layoutOptions.isOriginTop?'top':'bottom';var yResetProperty=layoutOptions.isOriginTop?'bottom':'top';var y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y);style[yResetProperty]='';this.css(style);this.emitEvent('layout',[this]);};Item.prototype.getXValue=function(x){var layoutOptions=this.layout.options;return layoutOptions.percentPosition&&!layoutOptions.isHorizontal?((x/this.layout.size.width)*100)+'%':x+'px';};Item.prototype.getYValue=function(y){var layoutOptions=this.layout.options;return layoutOptions.percentPosition&&layoutOptions.isHorizontal?((y/this.layout.size.height)*100)+'%':y+'px';};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return;}var transX=x-curX;var transY=y-curY;var transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true});};Item.prototype.getTranslate=function(x,y){var layoutOptions=this.layout.options;x=layoutOptions.isOriginLeft?x:-x;y=layoutOptions.isOriginTop?y:-y;if(is3d){return'translate3d('+x+'px, '+y+'px, 0)';}return'translate('+x+'px, '+y+'px)';};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition();};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10);};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to);}for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this);}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return;}var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop];}for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true;}}if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null;}this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true;};function toDashedAll(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase();});}var transitionProps='opacity,'+toDashedAll(vendorProperties.transform||'transform');Item.prototype.enableTransition=function(){if(this.isTransitioning){return;}this.css({transitionProperty:transitionProps,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false);};Item.prototype.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event);};Item.prototype.onotransitionend=function(event){this.ontransitionend(event);};var dashedVendorProperties={'-webkit-transform':'transform','-moz-transform':'transform','-o-transform':'transform'};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return;}var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition();}if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName];}if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName];}this.emitEvent('transitionEnd',[this]);};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false;};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]='';}this.css(cleanStyle);};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle);};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:''});this.emitEvent('remove',[this]);};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return;}var _this=this;this.once('transitionEnd',function(){_this.removeElem();});this.hide();};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('visibleStyle');onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};Item.prototype.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent('reveal');}};Item.prototype.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity){return'opacity';}for(var prop in optionStyle){return prop;}};Item.prototype.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('hiddenStyle');onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};Item.prototype.onHideTransitionEnd=function(){if(this.isHidden){this.css({display:'none'});this.emitEvent('hide');}};Item.prototype.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''});};return Item;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('outlayer/outlayer',['eventie/eventie','eventEmitter/EventEmitter','get-size/get-size','fizzy-ui-utils/utils','./item'],function(eventie,EventEmitter,getSize,utils,Item){return factory(window,eventie,EventEmitter,getSize,utils,Item);});}else if(typeof exports=='object'){module.exports=factory(window,require('eventie'),require('wolfy87-eventemitter'),require('get-size'),require('fizzy-ui-utils'),require('./item'));}else{window.Outlayer=factory(window,window.eventie,window.EventEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item);}}(window,function factory(window,eventie,EventEmitter,getSize,utils,Item){var console=window.console;var jQuery=window.jQuery;var noop=function(){};var GUID=0;var instances={};function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console){console.error('Bad element for '+this.constructor.namespace+': '+(queryElement||element));}return;}this.element=queryElement;if(jQuery){this.$element=jQuery(this.element);}this.options=utils.extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout();}}Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};utils.extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){utils.extend(this.options,opts);};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);utils.extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize();}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children);};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item);}return items;};Outlayer.prototype._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector);};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element);}return elems;};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true;};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize();};Outlayer.prototype.getSize=function(){this.size=getSize(this.element);};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0;}else{if(typeof option==='string'){elem=this.element.querySelector(option);}else if(utils.isElement(option)){elem=option;}this[measurement]=elem?getSize(elem)[size]:option;}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout();};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item);}}return layoutItems;};Outlayer.prototype._layoutItems=function(items,isInstant){this._emitCompleteOnItems('layout',items);if(!items||!items.length){return;}var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position);}this._processLayoutQueue(queue);};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0};};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant);}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y);}else{item.moveTo(x,y);}};Outlayer.prototype._postLayout=function(){this.resizeContainer();};Outlayer.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return;}var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false);}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return;}var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth;}measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px';};Outlayer.prototype._emitCompleteOnItems=function(eventName,items){var _this=this;function onComplete(){_this.dispatchEvent(eventName+'Complete',null,[items]);}var count=items.length;if(!items||!count){onComplete();return;}var doneCount=0;function tick(){doneCount++;if(doneCount===count){onComplete();}}for(var i=0,len=items.length;i<len;i++){var item=items[i];item.once(eventName,tick);}};Outlayer.prototype.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery){this.$element=this.$element||jQuery(this.element);if(event){var $event=jQuery.Event(event);$event.type=type;this.$element.trigger($event,args);}else{this.$element.trigger(type,args);}}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true;}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored;}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return;}this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem);}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return;}for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];utils.removeFrom(this.stamps,elem);this.unignore(elem);}};Outlayer.prototype._find=function(elems){if(!elems){return;}if(typeof elems==='string'){elems=this.element.querySelectorAll(elems);}elems=utils.makeArray(elems);return elems;};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return;}this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp);}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)};};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset;};Outlayer.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return;}eventie.bind(window,'resize',this);this.isResizeBound=true;};Outlayer.prototype.unbindResize=function(){if(this.isResizeBound){eventie.unbind(window,'resize',this);}this.isResizeBound=false;};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout);}var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout;}this.resizeTimeout=setTimeout(delayed,100);};Outlayer.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return;}this.layout();};Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth;};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items);}return items;};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}this.layoutItems(items,true);this.reveal(items);};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems);};Outlayer.prototype.reveal=function(items){this._emitCompleteOnItems('reveal',items);var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.reveal();}};Outlayer.prototype.hide=function(items){this._emitCompleteOnItems('hide',items);var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.hide();}};Outlayer.prototype.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items);};Outlayer.prototype.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items);};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item;}}};Outlayer.prototype.getItems=function(elems){elems=utils.makeArray(elems);var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item);}}return items;};Outlayer.prototype.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems('remove',removeItems);if(!removeItems||!removeItems.length){return;}for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();utils.removeFrom(this.items,item);}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy();}this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace);}};Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id];};Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments);}if(Object.create){Layout.prototype=Object.create(Outlayer.prototype);}else{utils.extend(Layout.prototype,Outlayer.prototype);}Layout.prototype.constructor=Layout;Layout.defaults=utils.extend({},Outlayer.defaults);utils.extend(Layout.defaults,options);Layout.prototype.settings={};Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments);};Layout.Item.prototype=new Item();utils.htmlInit(Layout,namespace);if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout);}return Layout;};Outlayer.Item=Item;return Outlayer;}));(function(window,factory){if(typeof define==='function'&&define.amd){define(['outlayer/outlayer','get-size/get-size','fizzy-ui-utils/utils'],factory);}else if(typeof exports==='object'){module.exports=factory(require('outlayer'),require('get-size'),require('fizzy-ui-utils'));}else{window.Masonry=factory(window.Outlayer,window.getSize,window.fizzyUIUtils);}}(window,function factory(Outlayer,getSize,utils){var Masonry=Outlayer.create('masonry');Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0);}this.maxY=0;};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth;}var columnWidth=this.columnWidth+=this.gutter;var containerWidth=this.containerWidth+this.gutter;var cols=containerWidth/columnWidth;var excess=columnWidth-containerWidth%columnWidth;var mathMethod=excess&&excess<1?'round':'floor';cols=Math[mathMethod](cols);this.cols=Math.max(cols,1);};Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth;};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=utils.indexOf(colGroup,minimumY);var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight;}return position;};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs;}var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs);}return colGroup;};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var firstX=this.options.isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i]);}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this.options.isFitWidth){size.width=this._getContainerFitWidth();}return size;};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break;}unusedCols++;}return(this.cols-unusedCols)*this.columnWidth-this.gutter;};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!==this.containerWidth;};return Masonry;}));;(function(window,document,undefined){var classes=[];var tests=[];var ModernizrProto={_version:'3.1.0',_config:{'classPrefix':'','enableClasses':true,'enableJSClass':true,'usePrefixes':true},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test]);},0);},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options});},addAsyncTest:function(fn){tests.push({name:null,fn:fn});}};var Modernizr=function(){};Modernizr.prototype=ModernizrProto;Modernizr=new Modernizr();function is(obj,type){return typeof obj===type;};function testRunner(){var featureNames;var feature;var aliasIdx;var result;var nameIdx;var featureName;var featureNameSplit;for(var featureIdx in tests){if(tests.hasOwnProperty(featureIdx)){featureNames=[];feature=tests[featureIdx];if(feature.name){featureNames.push(feature.name.toLowerCase());if(feature.options&&feature.options.aliases&&feature.options.aliases.length){for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++){featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());}}}result=is(feature.fn,'function')?feature.fn():feature.fn;for(nameIdx=0;nameIdx<featureNames.length;nameIdx++){featureName=featureNames[nameIdx];featureNameSplit=featureName.split('.');if(featureNameSplit.length===1){Modernizr[featureNameSplit[0]]=result;}else{if(Modernizr[featureNameSplit[0]]&&!(Modernizr[featureNameSplit[0]]instanceof Boolean)){Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]]);}Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result;}classes.push((result?'':'no-')+featureNameSplit.join('-'));}}}};var docElement=document.documentElement;var isSVG=docElement.nodeName.toLowerCase()==='svg';function setClasses(classes){var className=docElement.className;var classPrefix=Modernizr._config.classPrefix||'';if(isSVG){className=className.baseVal;}if(Modernizr._config.enableJSClass){var reJS=new RegExp('(^|\\s)'+classPrefix+'no-js(\\s|$)');className=className.replace(reJS,'$1'+classPrefix+'js$2');}if(Modernizr._config.enableClasses){className+=' '+classPrefix+classes.join(' '+classPrefix);isSVG?docElement.className.baseVal=className:docElement.className=className;}};var html5;if(!isSVG){;(function(window,document){var version='3.7.3';var options=window.html5||{};var reSkip=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;var saveClones=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;var supportsHtml5Styles;var expando='_html5shiv';var expanID=0;var expandoData={};var supportsUnknownElements;(function(){try{var a=document.createElement('a');a.innerHTML='<xyz></xyz>';supportsHtml5Styles=('hidden'in a);supportsUnknownElements=a.childNodes.length==1||(function(){(document.createElement)('a');var frag=document.createDocumentFragment();return(typeof frag.cloneNode=='undefined'||typeof frag.createDocumentFragment=='undefined'||typeof frag.createElement=='undefined');}());}catch(e){supportsHtml5Styles=true;supportsUnknownElements=true;}}());function addStyleSheet(ownerDocument,cssText){var p=ownerDocument.createElement('p'),parent=ownerDocument.getElementsByTagName('head')[0]||ownerDocument.documentElement;p.innerHTML='x<style>'+cssText+'</style>';return parent.insertBefore(p.lastChild,parent.firstChild);}function getElements(){var elements=html5.elements;return typeof elements=='string'?elements.split(' '):elements;}function addElements(newElements,ownerDocument){var elements=html5.elements;if(typeof elements!='string'){elements=elements.join(' ');}if(typeof newElements!='string'){newElements=newElements.join(' ');}html5.elements=elements+' '+newElements;shivDocument(ownerDocument);}function getExpandoData(ownerDocument){var data=expandoData[ownerDocument[expando]];if(!data){data={};expanID++;ownerDocument[expando]=expanID;expandoData[expanID]=data;}return data;}function createElement(nodeName,ownerDocument,data){if(!ownerDocument){ownerDocument=document;}if(supportsUnknownElements){return ownerDocument.createElement(nodeName);}if(!data){data=getExpandoData(ownerDocument);}var node;if(data.cache[nodeName]){node=data.cache[nodeName].cloneNode();}else if(saveClones.test(nodeName)){node=(data.cache[nodeName]=data.createElem(nodeName)).cloneNode();}else{node=data.createElem(nodeName);}return node.canHaveChildren&&!reSkip.test(nodeName)&&!node.tagUrn?data.frag.appendChild(node):node;}function createDocumentFragment(ownerDocument,data){if(!ownerDocument){ownerDocument=document;}if(supportsUnknownElements){return ownerDocument.createDocumentFragment();}data=data||getExpandoData(ownerDocument);var clone=data.frag.cloneNode(),i=0,elems=getElements(),l=elems.length;for(;i<l;i++){clone.createElement(elems[i]);}return clone;}function shivMethods(ownerDocument,data){if(!data.cache){data.cache={};data.createElem=ownerDocument.createElement;data.createFrag=ownerDocument.createDocumentFragment;data.frag=data.createFrag();}ownerDocument.createElement=function(nodeName){if(!html5.shivMethods){return data.createElem(nodeName);}return createElement(nodeName,ownerDocument,data);};ownerDocument.createDocumentFragment=Function('h,f','return function(){'+'var n=f.cloneNode(),c=n.createElement;'+'h.shivMethods&&('+getElements().join().replace(/[\w\-:]+/g,function(nodeName){data.createElem(nodeName);data.frag.createElement(nodeName);return'c("'+nodeName+'")';})+');return n}')(html5,data.frag);}function shivDocument(ownerDocument){if(!ownerDocument){ownerDocument=document;}var data=getExpandoData(ownerDocument);if(html5.shivCSS&&!supportsHtml5Styles&&!data.hasCSS){data.hasCSS=!!addStyleSheet(ownerDocument,'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}'+'mark{background:#FF0;color:#000}'+'template{display:none}');}if(!supportsUnknownElements){shivMethods(ownerDocument,data);}return ownerDocument;}var html5={'elements':options.elements||'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video','version':version,'shivCSS':(options.shivCSS!==false),'supportsUnknownElements':supportsUnknownElements,'shivMethods':(options.shivMethods!==false),'type':'default','shivDocument':shivDocument,createElement:createElement,createDocumentFragment:createDocumentFragment,addElements:addElements};window.html5=html5;shivDocument(document);if(typeof module=='object'&&module.exports){module.exports=html5;}}(typeof window!=="undefined"?window:this,document));};function cssToDOM(name){return name.replace(/([a-z])-([a-z])/g,function(str,m1,m2){return m1+m2.toUpperCase();}).replace(/^-/,'');};var omPrefixes='Moz O ms Webkit';var domPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(' '):[]);ModernizrProto._domPrefixes=domPrefixes;var cssomPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.split(' '):[]);ModernizrProto._cssomPrefixes=cssomPrefixes;var atRule=function(prop){var length=prefixes.length;var cssrule=window.CSSRule;var rule;if(typeof cssrule==='undefined'){return undefined;}if(!prop){return false;}prop=prop.replace(/^@/,'');rule=prop.replace(/-/g,'_').toUpperCase()+'_RULE';if(rule in cssrule){return'@'+prop;}for(var i=0;i<length;i++){var prefix=prefixes[i];var thisRule=prefix.toUpperCase()+'_'+rule;if(thisRule in cssrule){return'@-'+prefix.toLowerCase()+'-'+prop;}}return false;};ModernizrProto.atRule=atRule;function contains(str,substr){return!!~(''+str).indexOf(substr);};function createElement(){if(typeof document.createElement!=='function'){return document.createElement(arguments[0]);}else if(isSVG){return document.createElementNS.call(document,'http://www.w3.org/2000/svg',arguments[0]);}else{return document.createElement.apply(document,arguments);}};function fnBind(fn,that){return function(){return fn.apply(that,arguments);};};function testDOMProps(props,obj,elem){var item;for(var i in props){if(props[i]in obj){if(elem===false){return props[i];}item=obj[props[i]];if(is(item,'function')){return fnBind(item,elem||obj);}return item;}}return false;};var modElem={elem:createElement('modernizr')};Modernizr._q.push(function(){delete modElem.elem;});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style;});function domToCSS(name){return name.replace(/([A-Z])/g,function(str,m1){return'-'+m1.toLowerCase();}).replace(/^ms-/,'-ms-');};function getBody(){var body=document.body;if(!body){body=createElement(isSVG?'svg':'body');body.fake=true;}return body;};function injectElementWithStyles(rule,callback,nodes,testnames){var mod='modernizr';var style;var ret;var node;var docOverflow;var div=createElement('div');var body=getBody();if(parseInt(nodes,10)){while(nodes--){node=createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}style=createElement('style');style.type='text/css';style.id='s'+mod;(!body.fake?div:body).appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule;}else{style.appendChild(document.createTextNode(rule));}div.id=mod;if(body.fake){body.style.background='';body.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(body);}ret=callback(div,rule);if(body.fake){body.parentNode.removeChild(body);docElement.style.overflow=docOverflow;docElement.offsetHeight;}else{div.parentNode.removeChild(div);}return!!ret;};function nativeTestProps(props,value){var i=props.length;if('CSS'in window&&'supports'in window.CSS){while(i--){if(window.CSS.supports(domToCSS(props[i]),value)){return true;}}return false;}else if('CSSSupportsRule'in window){var conditionText=[];while(i--){conditionText.push('('+domToCSS(props[i])+':'+value+')');}conditionText=conditionText.join(' or ');return injectElementWithStyles('@supports ('+conditionText+') { #modernizr { position: absolute; } }',function(node){return getComputedStyle(node,null).position=='absolute';});}return undefined;};function testProps(props,prefixed,value,skipValueTest){skipValueTest=is(skipValueTest,'undefined')?false:skipValueTest;if(!is(value,'undefined')){var result=nativeTestProps(props,value);if(!is(result,'undefined')){return result;}}var afterInit,i,propsLength,prop,before;var elems=['modernizr','tspan'];while(!mStyle.style){afterInit=true;mStyle.modElem=createElement(elems.shift());mStyle.style=mStyle.modElem.style;}function cleanElems(){if(afterInit){delete mStyle.style;delete mStyle.modElem;}}propsLength=props.length;for(i=0;i<propsLength;i++){prop=props[i];before=mStyle.style[prop];if(contains(prop,'-')){prop=cssToDOM(prop);}if(mStyle.style[prop]!==undefined){if(!skipValueTest&&!is(value,'undefined')){try{mStyle.style[prop]=value;}catch(e){}if(mStyle.style[prop]!=before){cleanElems();return prefixed=='pfx'?prop:true;}}else{cleanElems();return prefixed=='pfx'?prop:true;}}}cleanElems();return false;};var testProp=ModernizrProto.testProp=function(prop,value,useValue){return testProps([prop],undefined,value,useValue);};function testPropsAll(prop,prefixed,elem,value,skipValueTest){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,'string')||is(prefixed,'undefined')){return testProps(props,prefixed,value,skipValueTest);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}ModernizrProto.testAllProps=testPropsAll;var prefixed=ModernizrProto.prefixed=function(prop,obj,elem){if(prop.indexOf('@')===0){return atRule(prop);}if(prop.indexOf('-')!=-1){prop=cssToDOM(prop);}if(!obj){return testPropsAll(prop,'pfx');}else{return testPropsAll(prop,obj,elem);}};function testAllProps(prop,value,skipValueTest){return testPropsAll(prop,undefined,undefined,value,skipValueTest);}ModernizrProto.testAllProps=testAllProps;testRunner();setClasses(classes);delete ModernizrProto.addTest;delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++){Modernizr._q[i]();}window.Modernizr=Modernizr;})(window,document);(function($){$.fn.pxgradient=function(options){var options=$.extend({step:10,colors:["#ffcc00","#cc0000","#000000"],dir:"y"},options);options.RGBcolors=[];for(var i=0;i<options.colors.length;i++){options.RGBcolors[i]=hex2Rgb(options.colors[i]);}return this.each(function(i,e){var pxg=$(e);if(!pxg.hasClass("sn-pxg")){var pxg_source=pxg.html();pxg.html('<span class="pxg-source" style="visibility: hidden;">'+pxg_source+'</span>').append('<u class="pxg-set"></u>');var pxg_set=pxg.find(".pxg-set");var pxg_text=pxg.find(".pxg-source");var pxg_w=pxg_text.innerWidth();var pxg_h=pxg_text.innerHeight();pxg_text.hide();pxg.addClass("sn-pxg");if(options.dir=="x"){var blocksize=pxg_w;}else if(options.dir=="y"){var blocksize=pxg_h;}var fullsteps=Math.floor(blocksize/options.step);var allsteps=fullsteps;var laststep=(blocksize-(fullsteps*options.step));if(laststep>0){allsteps++;}pxg_set.css({width:pxg_w,height:pxg_h});var offleft=0;var pxg_set_html='';if(options.dir=="x"){for(var i=0;i<allsteps;i++){var color=getColor(offleft,blocksize);pxg_set_html+='<s style="height:'+pxg_h+'px;width:'+options.step+'px;left:'+offleft+'px;color:'+color+'"><b style="left:-'+offleft+'px;width:'+pxg_w+'px;height:'+pxg_h+'px;">'+pxg_source+'</b></s>';offleft=offleft+options.step;}}else if(options.dir=="y"){for(var i=0;i<allsteps;i++){var color=getColor(offleft,blocksize);pxg_set_html+='<s style="width:'+pxg_w+'px;height:'+options.step+'px;top:'+offleft+'px;color:'+color+'"><b style="top:-'+offleft+'px;height:'+pxg_w+'px;height:'+pxg_h+'px;">'+pxg_source+'</b></s>';offleft=offleft+options.step;}}pxg_set.append(pxg_set_html);}});function hex2Rgb(hex){if('#'==hex.substr(0,1)){hex=hex.substr(1);}if(3==hex.length){hex=hex.substr(0,1)+hex.substr(0,1)+hex.substr(1,1)+hex.substr(1,1)+hex.substr(2,1)+hex.substr(2,1);}return[parseInt(hex.substr(0,2),16),parseInt(hex.substr(2,2),16),parseInt(hex.substr(4,2),16)];}function rgb2Hex(rgb){var s='0123456789abcdef';return'#'+s.charAt(parseInt(rgb[0]/16))+s.charAt(rgb[0]%16)+s.charAt(parseInt(rgb[1]/16))+s.charAt(rgb[1]%16)+s.charAt(parseInt(rgb[2]/16))+s.charAt(rgb[2]%16);}function getColor(off,blocksize){var fLeft=(off>0)?(off/blocksize):0;for(var i=0;i<options.colors.length;i++){fStopPosition=(i/(options.colors.length-1));fLastPosition=(i>0)?((i-1)/(options.colors.length-1)):0;if(fLeft==fStopPosition){return options.colors[i];}else if(fLeft<fStopPosition){fCurrentStop=(fLeft-fLastPosition)/(fStopPosition-fLastPosition);return getMidColor(options.RGBcolors[i-1],options.RGBcolors[i],fCurrentStop);}}return options.colors[options.colors.length-1];}function getMidColor(aStart,aEnd,fMidStop){var aRGBColor=[];for(var i=0;i<3;i++){aRGBColor[i]=aStart[i]+Math.round((aEnd[i]-aStart[i])*fMidStop)}return rgb2Hex(aRGBColor)}}})(jQuery);